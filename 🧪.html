<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<meta name="viewport" content= "width=device-width, user-scalable=no">
<script src="Scripts/__🍏.js" type='text/javascript'/>
</head>

<style></style>

<script>
	// App
(function () {

    const app = document.querySelector('html').$app = {
        Vars : { 
            'base': document.location.href.match(/.*\//umg)[0], 
            '🕯️': 0, 
            '🕯️🕯️': false, 
            '🌇': 0, 
            '☔': false
        },
        Import () {
            this.window.$app = document.querySelector('html').$app; // needed
        },
        Widgets: [],
        Widget: class Widget {
            constructor (id) {
                this.id = id;
                this.sid = `#${id}`;
                this.init = init;
                this.update = update;
                $('<div>').attr('id', id).html(`${id}...`).appendTo('body');
                Widgets[id] = this;
            }
            _Init () {
                try {
                    $(this.sid).text(`${this.id} Init...`).removeClass("errorBorder");
                    this.init();
                } catch (e) { $(this.sid).text(`${this.id} Init: ${e}`).addClass("errorBorder"); } 
            }
            _Update (xhr) {
                try {
                    $(this.sid).text(`${this.id} Update...`).removeClass("errorBorder");
                    this.Update($.parseJSON(xhr.responseText));
                } catch (e) { $(this.sid).text(`${this.id} Update: ${e}`).addClass("errorBorder"); }
            }
            Restart (m) {
                setTimeout(this._Init, 1000*60*m);
            }
            Reset (fn='get') {
                $(this.sid).text(`${this.id} ${fn} failed.\nResetting (40s)...`);
                setTimeout(this._Init, 1000*40);
            }
        }
    };

    app.Import ();

	function Load () {
        const s = event.target.readyState;
        if (s == "loading") webBrowser()
        else if (s == "interactive") Interactive ()
        else Complete ();
    }
    
    function webBrowser() {
        return;
		}

    function Interactive () {
        //['🖥️','⏳'].forEach((e)=> { const link = document.createElement('link'); link.rel = 'stylesheet'; link.type = 'text/css'; link.href = $app.Vars.base + 'Css/' + e + '.css'; document.head.appendChild(link); } ); 
				//'🌡️','🗓️','🪵','📒','⚠️','⏱️','⏳'
        ['jquery-3.5.0.min','canvasjs.min','🪵'].forEach((e)=> { const script = document.createElement('script'); script.type = 'text/javascript'; script.src = $app.Vars.base + 'Scripts/' + e + '.js'; document.head.appendChild(script); } ); 
				
    }
		 function Complete () {
			Widgets.forEach((w)=>w.Init())
		 }

		document.addEventListener("readystatechange", Load);
    
	})();


</script>

</head>

<body>

<div id="temperature"></div>
<table>
	<tr></tr>
</table>

</body>
		
</html>